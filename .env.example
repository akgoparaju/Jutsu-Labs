# Schwab API Credentials
# Get your API credentials from https://developer.schwab.com
SCHWAB_API_KEY=your_api_key_here
SCHWAB_API_SECRET=your_api_secret_here
SCHWAB_CALLBACK_URL=https://localhost:8080/callback
SCHWAB_TOKEN_PATH=token.json

# Database Configuration
# Database type: 'sqlite' for development, 'postgresql' for production
DATABASE_TYPE=sqlite

# SQLite Configuration (development)
SQLITE_DATABASE=data/market_data.db

# PostgreSQL Configuration (production)
# Note: Special characters in password (@, #, %, etc.) are automatically URL-encoded
POSTGRES_HOST=localhost
POSTGRES_PORT=5432
POSTGRES_USER=jutsu
POSTGRES_PASSWORD=your_postgres_password_here
POSTGRES_DATABASE=jutsu_labs

# Legacy DATABASE_URL (deprecated, use DATABASE_TYPE instead)
DATABASE_URL=sqlite:///data/market_data.db
# For PostgreSQL: postgresql://user:password@localhost:5432/jutsu_labs

# Logging Configuration
LOG_LEVEL=INFO
LOG_TO_CONSOLE=true

# Application Configuration
ENV=development
DEBUG=true

# Data Configuration
DATA_CACHE_DIR=data/
DEFAULT_TIMEFRAME=1D
DEFAULT_LOOKBACK_DAYS=365

# Backtest Configuration
INITIAL_CAPITAL=100000
DEFAULT_COMMISSION=0.01
DEFAULT_SLIPPAGE=0.0

# ==============================================================================
# Strategy Parameters - Momentum-ATR (V4.0)
# ==============================================================================
# Override these values via CLI arguments or .env file for quick threshold changes
# CLI arguments take precedence over .env values

# MACD Indicator Parameters
STRATEGY_MACD_FAST_PERIOD=12
STRATEGY_MACD_SLOW_PERIOD=26
STRATEGY_MACD_SIGNAL_PERIOD=9

# Volatility Filter
STRATEGY_VIX_KILL_SWITCH=30.0

# Risk Management (ATR-based)
STRATEGY_ATR_PERIOD=14
STRATEGY_ATR_STOP_MULTIPLIER=2.0

# Portfolio Risk Allocation
STRATEGY_RISK_STRONG_TREND=0.03    # 3.0% portfolio risk for strong trends
STRATEGY_RISK_WANING_TREND=0.015   # 1.5% portfolio risk for waning trends

# ==============================================================================
# Strategy Parameters - MACD-Trend-v4 (Goldilocks)
# ==============================================================================
# Override these values via CLI arguments or .env file
# CLI arguments take precedence over .env values

# Trading Symbols
STRATEGY_MACD_V4_SIGNAL_SYMBOL=QQQ
STRATEGY_MACD_V4_BULL_SYMBOL=TQQQ
STRATEGY_MACD_V4_DEFENSE_SYMBOL=QQQ

# MACD Indicator
STRATEGY_MACD_V4_FAST_PERIOD=12
STRATEGY_MACD_V4_SLOW_PERIOD=26
STRATEGY_MACD_V4_SIGNAL_PERIOD=9

# Trend Filter
STRATEGY_MACD_V4_EMA_PERIOD=100

# ATR Risk Management
STRATEGY_MACD_V4_ATR_PERIOD=14
STRATEGY_MACD_V4_ATR_STOP_MULTIPLIER=3.0

# Position Sizing
STRATEGY_MACD_V4_RISK_BULL=0.025           # 2.5% risk for bull (TQQQ)
STRATEGY_MACD_V4_ALLOCATION_DEFENSE=0.60   # 60% allocation for defense (QQQ)

# ==============================================================================
# Strategy Parameters - MACD-Trend-v5 (Dynamic Regime)
# ==============================================================================
# VIX-filtered strategy with dual parameter playbooks
# Override these values via CLI arguments or .env file
# CLI arguments take precedence over .env values

# Trading Symbols (V5 requires 3 symbols)
STRATEGY_MACD_V5_SIGNAL_SYMBOL=QQQ
STRATEGY_MACD_V5_BULL_SYMBOL=TQQQ
STRATEGY_MACD_V5_DEFENSE_SYMBOL=QQQ
STRATEGY_MACD_V5_VIX_SYMBOL=VIX

# VIX Regime Detection
STRATEGY_MACD_V5_VIX_EMA_PERIOD=50         # VIX EMA period for regime detection

# CALM Regime Playbook (VIX_raw <= VIX_EMA_50)
STRATEGY_MACD_V5_EMA_PERIOD_CALM=200       # Slow trend filter for smooth markets
STRATEGY_MACD_V5_ATR_STOP_CALM=3.0         # Wide stop for smooth markets

# CHOPPY Regime Playbook (VIX_raw > VIX_EMA_50)
STRATEGY_MACD_V5_EMA_PERIOD_CHOPPY=75      # Fast trend filter for choppy markets
STRATEGY_MACD_V5_ATR_STOP_CHOPPY=2.0       # Tight stop for choppy markets

# MACD Indicator (shared across regimes)
STRATEGY_MACD_V5_FAST_PERIOD=12
STRATEGY_MACD_V5_SLOW_PERIOD=26
STRATEGY_MACD_V5_SIGNAL_PERIOD=9

# ATR Period (shared across regimes)
STRATEGY_MACD_V5_ATR_PERIOD=14

# Position Sizing (shared across regimes)
STRATEGY_MACD_V5_RISK_BULL=0.025           # 2.5% risk for bull (TQQQ)
STRATEGY_MACD_V5_ALLOCATION_DEFENSE=0.60   # 60% allocation for defense (QQQ)

# ==============================================================================
# Strategy Parameters - MACD-Trend-v6 (VIX-Filtered with Master Switch)
# ==============================================================================
# VIX-filtered strategy that uses VIX as a "master switch" to gate v4 logic
# Override these values via CLI arguments or .env file
# CLI arguments take precedence over .env values

# Trading Symbols (V6 requires 3 symbols: signal, bull, VIX)
# Index symbols use $ prefix (escape $ in shell: \$VIX or "$VIX")
STRATEGY_MACD_V6_SIGNAL_SYMBOL=QQQ
STRATEGY_MACD_V6_BULL_SYMBOL=TQQQ
STRATEGY_MACD_V6_DEFENSE_SYMBOL=QQQ
STRATEGY_MACD_V6_VIX_SYMBOL=$VIX

# VIX Master Switch
STRATEGY_MACD_V6_VIX_EMA_PERIOD=50         # VIX EMA period for regime detection

# V4 Parameters (inherited, active only when CALM)
# MACD Indicator
STRATEGY_MACD_V6_FAST_PERIOD=12
STRATEGY_MACD_V6_SLOW_PERIOD=26
STRATEGY_MACD_V6_SIGNAL_PERIOD=9

# Trend Filter
STRATEGY_MACD_V6_EMA_PERIOD=100

# ATR Risk Management
STRATEGY_MACD_V6_ATR_PERIOD=14
STRATEGY_MACD_V6_ATR_STOP_MULTIPLIER=3.0

# Position Sizing
STRATEGY_MACD_V6_RISK_BULL=0.025           # 2.5% risk for bull (TQQQ)
STRATEGY_MACD_V6_ALLOCATION_DEFENSE=0.60   # 60% allocation for defense (QQQ)

# API Configuration (future)
API_HOST=0.0.0.0
API_PORT=8000
API_WORKERS=4

# ==============================================================================
# Security & Authentication
# ==============================================================================
# JWT secret key for token signing (generate a secure random string)
SECRET_KEY=your_secret_key_for_jwt_tokens_here

# TOTP Encryption Key (2FA Security - NIST 800-63B Compliance)
# REQUIRED for encrypting TOTP secrets at rest
# Without this key, TOTP secrets are stored in plain text (not recommended)
# Generate: python -c "from cryptography.fernet import Fernet; print(Fernet.generate_key().decode())"
TOTP_ENCRYPTION_KEY=

# Authentication mode
# Set to 'true' to require login before accessing dashboard
# Set to 'false' (default) for local development without login
AUTH_REQUIRED=false

# Default admin credentials (only used when AUTH_REQUIRED=true)
# Change these in production!
ADMIN_PASSWORD=admin

# Legacy HTTP Basic Auth (deprecated, use JWT instead)
# JUTSU_API_USERNAME=admin
# JUTSU_API_PASSWORD=your_password_here
