# Monte Carlo Simulation Configuration
#
# Bootstrap resampling Monte Carlo simulation to test strategy robustness
# against sequence risk and luck.
#
# Usage:
#   jutsu monte-carlo --config config/examples/monte_carlo_config.yaml

monte_carlo:
  # Input/Output Paths
  # -------------------
  # Input file must be generated by WFO first
  # Format: CSV with Portfolio_Return_Percent column
  input_file: output/wfo_MACD_Trend_v6_2025-11-10_190857-sortino_ratio/monte_carlo_input.csv

  # Output directory for results (auto-generates timestamp subdirectory)
  output_directory: output/monte_carlo_MACD_Trend_v6

  # Simulation Parameters
  # ---------------------
  # Number of bootstrap resampling iterations
  # More iterations = more accurate distribution, but longer runtime
  # Recommended:
  #   - 1,000: Quick test (30-60s)
  #   - 10,000: Standard analysis (2-5 min)
  #   - 100,000: High precision (20-30 min)
  iterations: 10000

  # Initial capital for synthetic equity curves
  # Should match your WFO initial capital
  initial_capital: 10000

  # Random seed for reproducibility (optional)
  # If set, results will be identical across runs
  # Comment out or set to null for true randomness
  random_seed: 42

  # Analysis Configuration
  # ----------------------
  analysis:
    # Percentiles to calculate for distribution analysis
    # Shows range of probable outcomes
    percentiles: [5, 25, 50, 75, 95]

    # Confidence level for confidence intervals (0-1)
    # Default: 0.95 (95% confidence interval)
    confidence_level: 0.95

    # Risk of ruin thresholds (percentage drawdowns)
    # Reports probability of exceeding each threshold
    # Example: [30, 40, 50] = report % of runs with >30%, >40%, >50% loss
    risk_of_ruin_thresholds: [30, 40, 50]

  # Performance Options
  # -------------------
  performance:
    # Enable parallel processing for faster execution
    # Recommended: true for iterations >= 10,000
    parallel: false

    # Number of worker processes (optional)
    # Default: CPU count - 1
    # Only applies if parallel: true
    num_workers: 4

  # Visualization Options
  # ---------------------
  visualization:
    # Generate histogram visualizations
    # Creates two PNG files:
    #   - monte_carlo_returns_histogram.png (return distribution)
    #   - monte_carlo_drawdown_histogram.png (drawdown distribution)
    enabled: true

    # Image quality (DPI)
    # Recommended: 300 for publication quality, 150 for quick previews
    dpi: 300

    # Figure size in inches [width, height]
    # Default: [10, 6]
    figsize: [10, 6]

# Example Configurations for Different Use Cases
# -----------------------------------------------

# Quick Test (Fast)
# monte_carlo:
#   input_file: output/wfo_*/monte_carlo_input.csv
#   output_directory: output/monte_carlo_test
#   iterations: 1000
#   initial_capital: 10000
#   random_seed: 42
#   analysis:
#     percentiles: [5, 50, 95]
#     confidence_level: 0.95
#     risk_of_ruin_thresholds: [30, 50]

# High Precision (Slow)
# monte_carlo:
#   input_file: output/wfo_*/monte_carlo_input.csv
#   output_directory: output/monte_carlo_precise
#   iterations: 100000
#   initial_capital: 10000
#   random_seed: null  # True randomness
#   analysis:
#     percentiles: [1, 5, 10, 25, 50, 75, 90, 95, 99]
#     confidence_level: 0.99
#     risk_of_ruin_thresholds: [20, 30, 40, 50, 60]
#   performance:
#     parallel: true
#     num_workers: 8

# Multiple Risk Thresholds
# monte_carlo:
#   input_file: output/wfo_*/monte_carlo_input.csv
#   output_directory: output/monte_carlo_risk
#   iterations: 10000
#   initial_capital: 10000
#   analysis:
#     percentiles: [5, 25, 50, 75, 95]
#     confidence_level: 0.95
#     risk_of_ruin_thresholds: [10, 20, 30, 40, 50, 60, 70]  # Comprehensive risk profile

# Notes
# -----
# 1. Run WFO first to generate monte_carlo_input.csv
# 2. Bootstrap resampling assumes trade independence
# 3. Higher iterations = more accurate but slower
# 4. Use random_seed for reproducible research
# 5. Results interpretation:
#    - If original result is at 50th percentile: likely reflects true edge (not luck)
#    - If original result is at 95th percentile: very lucky sequence (be cautious)
#    - If original result is at 5th percentile: very unlucky sequence
#    - Low risk of ruin (<10%) = robust strategy
#    - High risk of ruin (>25%) = high sequence dependency (risky)
